<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <style type="text/css">
        #colorbox {
            width: 320px;
            height: 320px;
            position: relative;
        }

        #red, #blue, #green, #purple {
            width: 150px;
            height: 150px;
            border: 1px solid black;
            position: absolute;
        }

        #green {left: 160px;}
        #blue {top: 160px;}
        #purple {left: 160px; top: 160px;}
    </style>
    <script type="text/javascript">
        //bool = this.checked : name이 all 인 체크박스의 체크 속성(true,false)
        var taerin = "taerin";
        function allselect(bool) {
            var chks = document.getElementsByName("chk");
            for(var i = 0; i < chks.length; i++){
                chks[i].checked = bool;
            }
        }
        function sel(){
            //1.chk 라는 이름을 가진 모든 check 박스를 가져온다.
            var chks = document.getElementsByName("chk");
            var chksall = document.getElementsByName("all");
            var count = 0;

            // 만일 chk 들중 체크되어있는 엘리멘트가 있다면?
            for(var i = 0; i < chks.length; i++){
                if(chks[i].checked){
                    //3. 체크되어있는 chk.value 값을 아이디로 가지는 요소의 배경색을 chkvalue 값을 바꾸자
                    document.getElementById(chks[i].value).style.backgroundColor=chks[i].value;
                    count ++;
                    chksall[0].checked = false;
                    // document.getElementsByName(all).checked = false;
                } else {
                    document.getElementById(chks[i].value).style.backgroundColor="";
                    count --;
                }
            }
            if(count == 4){
                chksall[0].checked = true;
            }
        }



        function clearDiv(){

            var chks = document.getElementsByName("chk");

            var chksall = document.getElementsByName("all");

            chksall[0].checked = false;


            for(var i = 0; i < chks.length; i++){
                chks[i].checked = false;

                document.getElementById(chks[i].value).style.backgroundColor="";
            }

        //    var colorbox = document.querySelectorAll("#colorbox > div");
        //     for(var i =0 ; i < colorbox.length; i++){
        //         colorBox[i].style.backgroundColor = ""
        //     }
        //     document.getElementsByName("all")[0].checked = false;
        //     allselect(false);
        }  
 
    </script>
</head>
<body>
    <div id="colorbox">
        <div id="red">red</div>
        <div id="green">green</div>
        <div id="blue">blue</div>
        <div id="purple">purple</div>
    </div>
    <div id="base">
        <form>
            <input type="checkbox" name="all" onclick="allselect(this.checked);" id="">전체선택<br>
            <input type="checkbox" name="chk" id="" value="red">빨강<br>
            <input type="checkbox" name="chk" id="" value="green">초록<br>
            <input type="checkbox" name="chk" id="" value="blue">파랑<br>
            <input type="checkbox" name="chk" id="" value="purple">보라<br>

            <input type="button" value="선택" onclick="sel()">
            <input type="button" value="초기화" onclick="clearDiv()">
        </form>
    </div>
</body>
</html>